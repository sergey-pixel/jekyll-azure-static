---
layout: default
title: API weatherstack
parent: API документация
nav_order: 1
---

# API Документация

Добро пожаловать в документацию по API сервиса [weatherstack](https://weatherstack.com).  
Используя приведенные ниже инструкции и интерактивные примеры кода, вы можете делать запросы API за считаные минуты. Если у вас уже есть учетная запись и вы хотели бы пропустить подробную документацию, сразу перейдите к [Руководству по быстрому старту](https://weatherstack.com/quickstart).

Weatherstack API разработан для предоставления точных данных о погоде для любых приложений и разных вариантов использования. Возможно получить информацию о текущей погоде, о погоде в прошлом или прогноз погоды на срок до 14 дней. Для интеграции поддерживаются все основные языки программирования.
Дизайн API прост в использовании, ознакомьтесь с документацией ниже для начала работы.
## Начало работы
### API Аутентификация

Первым шагом к использованию API является аутентификация с помощью уникального ключа, который можно найти в панели управления вашей учетной записи после регистрации. Что бы пройти аутентификацию с помощью API, просто используйте базовый URL и введите ключ доступа к API в качестве параметра `access_key` API.

**Пример запроса:**

```bash
https://api.weatherstack.com/current
    ? access_key = YOUR_ACCESS_KEY
    & query = New York
```
*Важно*. Сохраняйте ваш ключ доступа к API в безопасном месте. Если вам необходимо изменить ключ, вы сможете сделать это, зайдя в [Панель управления](https://weatherstack.com/dashboard) под своей учетной записью.
### 256-битное шифрование

Клиенты, использующие стандартный тарифный план и выше, могут подключаться к weatherstack с использованием отраслевого стандарта SSL (HTTPS), добавив `s` к протоколу HTTP как показано в примере ниже.

**Пример запроса:**

```bash
https://api.weatherstack.com/...
```
Если вы в настоящее время пользуетесь бесплатным тарифным планом и хотели бы использовать HTTPS, пожалуйста, обновите свой тарифный план. Вы можете узнать больше о доступных [Тарифных планах](https://weatherstack.com/product).
### API коды ошибок

Когда запрос API завершается неудачей, weatherstack возвращает объект ошибки в формате JSON. Каждый объект содержит код ошибки, тип ошибки и  детали ошибки . Ниже приводится пример ошибки, и список API ошибок.

**Пример API ошибки:**

```json
{
    "success": false,
    "error": {
        "code": 104,
        "type": "usage_limit_reached",
        "info": "Your monthly API request volume has been reached. Please upgrade your plan."    
    }
}
```

**Распространенные ошибки API:**

| Код          | Тип               | Информация |
|:-------------|:------------------|:------|
| `404`          | `404_not_found`     | Пользователь запросил ресурс, которого не существует |
| `101`          | `missing_access_key`   | Пользователь не указал ключ    |
| `101`           | `invalid_access_key`      | Пользователь указал недопустимый ключ   |
| `102`           | `inactive_user` | Учетная запись пользователя неактивна или заблокирована  |
| `103`           | `invalid_api_function` | Пользователь запросил несуществующую функцию API  |
| `104`           | `usage_limit_reached` | Пользователь достиг своего ежемесячного лимита на запрос подписки  |
| `105`           | `funcion_access_restricted` | Текущая подписка пользователя не поддерживает эту функцию API  |
| `105`           | `https_access_restricted` | Текущий план подписки пользователя не поддерживает HTTPS  |
| `601`           | `missing_query` | Было указано недопустимое (или отсутствующее) значение запроса  |
| `602`           | `no_results` | Запрос API не вернул никаких результатов  |
| `603`           | `historical_queries_not_supported_on_plan` | Исторические данные не поддерживаются текущим планом подписки  |
| `604`           | `bulk_queries_not_supported_on_plan` | Массовые запросы не поддерживаются в текущем плане подписки  |
| `605`           | `invalid_language` | Был указан недопустимый код языка  |
| `606`           | `invalid_unit` | Было указано недопустимое значение единицы измерения  |
| `607`           | `invalid_interval` | Было указано недопустимое значение интервала  |
| `608`           | `invalid_forecast_days` | Было указано недопустимое значение дней прогноза  |
| `609`           | `forecast_days_not_supported_on_plan` | Данные о прогнозе погоды не поддерживаются текущим планом подписки  |
| `611`           | `invalid_historical_date` | Были указаны недопустимые историчские данные  |
| `612`           | `invalid_historical_time_frame` | Были указаны недопустимые исторические временные рамки  |
| `613`           | `historical_time_frame_too_long` | Указанные исторические временные рамки слишком велики (Максимум: 60 дней)  |
| `614`           | `missing_historical_date` | Были указаны недопустимые исторические данные  |
| `615`           | `request_failed` | Запрос API не выполнен  |


## Функции API 
### Текущая погода 


Для запроса текущей погоды в выбранном вами местоположении, просто добавьте ваше местоположение к конечной точке API, как показано в примере ниже. В зависимости от вашей подписки вы также можете выполнить массовый запрос местоположения, передав несколько местоположений, разделенных точкой с запятой в API URL.

**Пример запроса API:**

```bash
https://api.weatherstack.com/current ? access_key = YOUR_ACCESS_KEY & query = New York
```

**Параметры HTTP GET запроса:**

| Объект  | Описание    |
|:--------|:------------|
| `access_key` | **[Обязательно]** Ваш ключ доступа к API, который можно найти в [панели управления учетной записи](https://weatherstack.com/dashboard)|
| `query` | **[Обязательно]** Используйте этот параметр, чтобы передать API один идентификатор местоположения или несколько идентификаторов местоположения, разделенных точкой с запятой. Узнайте больше о [параметре запроса](https://weatherstack.com/documentation#query_parameter)  |
| `units`  | [Опционально] Используйте этот параметр для передачи одного из идентификаторов объекта в API: {::nomarkdown}<ul><li>m для метрических</li><li>s для научных</li><li>f для Фаренгейта</li></ul>{:/} Узнайте больше о [параметре единиц измерения](https://weatherstack.com/documentation#units_parameter)  |  
| `language`  |  [Опционально] Используйте этот параметр, чтобы указать предпочитаемый язык ответа API, используя его ISO-код (по умолчанию: английский). Узнайте больше о [языковом параметре](https://weatherstack.com/documentation#language_parameter)  |  
| `callback` | [Опционально] Используйте этот параметр, чтобы указать имя функции обратного вызова JSONP для переноса вашего ответа API. Узнайте больше об [обратных вызовах JSONP](https://weatherstack.com/documentation#jsonp_callbacks)   |

**Пример API ответа:**

Успешный запрос API из приведенного выше примера возвращает данные о погоде в реальном времени для города Нью-Йорка, включая подробную информацию о температуре, влажности, ветре, облачности, давлении, текущем времени, ряде идентификаторов местоположения и многом другом.
```json
{
    "request": {
        "type": "City",
        "query": "New York, United States of America",
        "language": "en",
        "unit": "m"
    },
    "location": {
        "name": "New York",
        "country": "United States of America",
        "region": "New York",
        "lat": "40.714",
        "lon": "-74.006",
        "timezone_id": "America/New_York",
        "localtime": "2019-09-07 08:14",
        "localtime_epoch": 1567844040,
        "utc_offset": "-4.0"
    },
    "current": {
        "observation_time": "12:14 PM",
        "temperature": 13,
        "weather_code": 113,
        "weather_icons": [
            "https://assets.weatherstack.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png"
        ],
        "weather_descriptions": [
            "Sunny"
        ],
        "wind_speed": 0,
        "wind_degree": 349,
        "wind_dir": "N",
        "pressure": 1010,
        "precip": 0,
        "humidity": 90,
        "cloudcover": 0,
        "feelslike": 13,
        "uv_index": 4,
        "visibility": 16
    }
}
```

**Объекты ответа API:**

| Объект ответа   | Описание   |
|:----------------|:-----------|
| `request`>`type`  | Возвращает тип местоположения, указанный при запросе. Возможные значения: {::nomarkdown}<ul><li>город</li><li>широта/долгота</li><li>IP</li><li>индекс</li></ul>{:/}  |
| `request`>`query` | Возвращает идентификатор точного местоположения, указанный при запросе |
| `request`> `language` | Возвращает ISO код языка, указанный при запросе  |
| `request`>`unit`   | Возвращает идентификатор единиц измерения, указанный при запросе: {::nomarkdown}<ul><li>m метрические</li><li>s научные</li><li>f Фаренгейт</li></ul>{:/}  |
| `location`>`name` | Возвращает название местоположения, указанное при запросе |
| `location`>`country` | Возвращает название страны, связанной с местоположением, указанным при запросе |
| `location`>`region`  | Возвращает название региона, связанного с местоположением, указанным при запросе |
| `location`>`lat`    | Возвращает координату широты, связанную с местоположением, указанным при запросе  |
| `location`>`lon`    | Возвращает координату долготы, связанную с местоположением, указанным при запросе |
| `location`>`timezone_id` | Возвращает идентификатор часового пояса, связанного с местоположением, указанным при запросе. (Например: `America/New_York)` |
| `location`>`localtime`   | Возвращает местное время местоположения, указанного при запросе. (Например: `2019-09-07 08:14)` |
| `location`>`localtime_epoch` | Возвращает местное время местоположения, указанного при запросе в формате UNIX. (Например: `1567844040`)|
| `location`>`utc_offset`  | Возвращает  смещение UTC часового пояса местоположения, указанного при запросе. (Например:  `-4.0`) |
| `current`>`observation_time` | Возвращает время UTC для момента сбора данных по запросу |
| `current`>`temperature` | Возвращает температуру в выбранных единицах измерения. (По умолчанию: градусы Цельсия) |
| `current`>`weather_code` | Возвращает универсальный код погодных условий для местоположения, указанного при запросе. Вы можете скачать все доступные коды погоды по ссылке: [Скачать коды погоды (ZIP-файл)](https://weatherstack.com/site_resources/weatherstack-weather-condition-codes.zip)   |
| `current`>`weather_icons` | Возвращает один или несколько значков погоды в формате PNG для местоположения, указанного при запросе |
| `current`>`weather_descriptions` | Возвращает одно или несколько описаний погоды для местоположения, указанного при запросе |
| `current`>`wind_speed` | Возвращает значение скорость ветра в выбранных единицах измерения (По умолчанию: километры/час)  |
| `current`>`wind_degree` | Возвращает значение градуса ветра |
| `current`>`wind_dir` | Возвращает значение направление ветра |
| `current`>`pressure` | Возвращает значение давления в выбранных единицах измерения.(По умолчанию: МБ-миллибар) |
| `current`>`precip`   | Возвращает значение уровня осадков в выбранной единице измерения. (По умолчанию: мм-миллиметры) |
| `current`>`humidity` | Возвращает значение уровня влажности воздуха в процентах |
| `current`>`cloudcover` | Возвращает значение облачности в процентах |
| `current`>`feelslike`   | Возвращает значение температуры "по ощущениям" в выбранных единицах измерения. (По умолчанию: градусы Цельсия) |
| `current`>`uv_index`    | Возвращает значение УФ-индекса связанного с текущими погодными условиями |
| `current`>`visibility`  | Возвращает значение видимости в выбранных единицах измерения. (По умолчанию: километры) |

###  Исторические данные о погоде

Чтобы посмотреть исторические данные о погоде вплоть до 2008 года, укажите одну дату (позже июля 2008 года) или несколько дат, разделенных точкой с запятой в качестве значения параметра `historical_date` конечной точки `historical` weatherstack API.

**Пример API запроса:**

```bash
https://api.weatherstack.com/historical ? access_key = YOUR_ACCESS_KEY & query = New York & historical_date = 2015-01-21 & hourly = 1
```

**Параметры HTTP GET запроса:**

|  Объект | Описание  |
|:--------|:----------|
| `acccess_key` | **[Обязательно]** Ваш ключ доступа к API, который можно найти в [панели управления учетной записи](https://weatherstack.com/dashboard) |
| `query`      | **[Обязательно]** Используйте этот параметр, чтобы передать API один идентификатор местоположения или несколько идентификаторов местоположения, разделенных точкой с запятой. Узнайте больше о [параметре запроса](https://weatherstack.com/documentation#query_parameter)  |
| `historical_date` | **[Обязательно]** Используйте этот параметр, чтобы передать API одну или несколько исторических дат, разделенных точкой с запятой. (Пример: `2015-01-21` для одной даты или `2015-01-21;2015-01-22` для нескольких дат) |
| `hourly`         | [Опционально] Установите для этого параметра значение  `1` (включено) или `0` (выключено) в зависимости от необходимости  получить данные о погоде с разбивкой по часам. (По умолчанию: `0`-выкл.) |
| `interval` | [Опционально] Если включены почасовые данные, используйте этот параметр для определения интервала: {::nomarkdown}<ul><li>1 час</li><li>3 часа (по умолчанию)</li><li>6 часов</li><li>12 часов (день/ночь)</li><li>24 часа (в среднем за день)</li></ul>{:/}   |
| `units`  | [Опционально] Используйте этот параметр для передачи одного из идентификаторов объекта в API: {::nomarkdown}<ul><li>m для метрических</li><li>s для научных</li><li>f для Фаренгейта</li></ul>{:/} Узнайте больше о [параметре единиц измерения](https://weatherstack.com/documentation#units_parameter)  |  
| `language`  |  [Опционально] Используйте этот параметр, чтобы указать предпочитаемый язык ответа API, используя его ISO-код (по умолчанию: английский). Узнайте больше о [языковом параметре](https://weatherstack.com/documentation#language_parameter)  |  
| `callback` | [Опционально] Используйте этот параметр, чтобы указать имя функции обратного вызова JSONP для переноса вашего ответа API. Узнайте больше об [обратных вызовах JSONP](https://weatherstack.com/documentation#jsonp_callbacks)   |

**Пример  API ответа:**

В дополнение к запрошенным данным о погоде в прошлом, успешный вызов API также вернет текущую погоду в местоположении, указанном в запросе, а также информацию о запросе API и местоположении.
```json
{
    "request": {
        "type": "City",
        "query": "New York, United States of America",
        "language": "en",
        "unit": "m"
    },
    "location": {
        "name": "New York",
        "country": "United States of America",
        "region": "New York",
        "lat": "40.714",
        "lon": "-74.006",
        "timezone_id": "America/New_York",
        "localtime": "2019-09-07 10:05",
        "localtime_epoch": 1567850700,
        "utc_offset": "-4.0"
    },
    "current": {
        "observation_time": "02:05 PM",
        "temperature": 15,
        "weather_code": 113,
        "weather_icons": [
            "https://assets.weatherstack.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png"
        ],
        "weather_descriptions": [
            "Sunny"
        ],
        "wind_speed": 0,
        "wind_degree": 0,
        "wind_dir": "N",
        "pressure": 1011,
        "precip": 0,
        "humidity": 78,
        "cloudcover": 0,
        "feelslike": 15,
        "uv_index": 5,
        "visibility": 16
    },
    "historical": {
        "2008-07-01": {
            "date": "2008-07-01",
            "date_epoch": 1214870400,
            "astro": {
                "sunrise": "05:29 AM",
                "sunset": "08:31 PM",
                "moonrise": "03:24 AM",
                "moonset": "07:37 PM",
                "moon_phase": "Waning Crescent",
                "moon_illumination": 4
            },
            "mintemp": 0,
            "maxtemp": 0,
            "avgtemp": 19,
            "totalsnow": 0,
            "sunhour": 14.5,
            "uv_index": 4,
            "hourly": [
                {
                    "time": "0",
                    "temperature": 27,
                    "wind_speed": 7,
                    "wind_degree": 201,
                    "wind_dir": "SSW",
                    "weather_code": 113,
                    "weather_icons": [
                        "https://assets.weatherstack.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png"
                    ],
                    "weather_descriptions": [
                        "Sunny"
                    ],
                    "precip": 1.8,
                    "humidity": 80,
                    "visibility": 9,
                    "pressure": 1011,
                    "cloudcover": 15,
                    "heatindex": 25,
                    "dewpoint": 20,
                    "windchill": 24,
                    "windgust": 11,
                    "feelslike": 25,
                    "chanceofrain": 0,
                    "chanceofremdry": 0,
                    "chanceofwindy": 0,
                    "chanceofovercast": 0,
                    "chanceofsunshine": 0,
                    "chanceoffrost": 0,
                    "chanceofhightemp": 0,
                    "chanceoffog": 0,
                    "chanceofsnow": 0,
                    "chanceofthunder": 0,
                    "uv_index": 6
                },
                {   "time": "300", ...   },
                {   "time": "600", ...   },
                // 6 more items
            ]
        }
    }
}
```
*Обратите внимание:* объекты ответа `request`, `location` и `current` не объясняются ниже, поскольку они уже упомянуты в разделе Конечная точка текущей погоды выше.

**Объекты ответа API:**

| Объект ответа    | Описание    |
|:-----------------|:------------|
| `historical`>`...`>`date` | Возвращает дату исторических данных |
| `historical`>`...`>`date_epoch` | Возвращает дату исторических данных в формате UNIX |
| `historical`>`...`>`astro` | Возвращает 6 вложенных объектов, содержащих сведения об астрономической погоде, перечисление и подробное объяснение ниже  |
| `astro`>`sunrise` | Возвращает местное время восхода солнца в формате `hh:mm am/pm` |
| `astro`>`sunset` | Возвращает местное время захода солнца в формате `hh:mm am/pm` |
| `astro`>`moonrise` | Возвращает местное время восхода луны в формате `hh:mm am/pm` |
| `astro`>`moonset`  | Возвращает местное время захода луны в формате `hh:mm am/pm`  |
| `astro`>`moon_phase` | Возвращает фазу луны. Возможные значения: {::nomarkdown}<ul><li>Новолуние</li><li>Молодая луна</li><li>Первая четверть</li><li>Прибывающая луна</li><li>Полнолуние</li><li>Убывающая луна</li><li>Последняя четверть</li><li>Старая луна</li></ul>{:/}  |
| `astro`>`moon_illumination` | Возвращает значение уровня освещенности луны в процентах |
| `historical`>`...`>`mintemp` | Возвращает значение минимальной температуры за день в выбранной единице измерения. (По умолчанию: Цельсий) |
| `historical`>`...`>`maxtemp` | Возвращает значение максимальной температуры за день выбранной единице измерения. (По умолчанию: Цельсий) |
| `historical`>`...`>`avgtemp` | Возвращает значение средней температуры за день в выбранной единице измерения. (По умолчанию: Цельсий) |
| `historical`>`...`>`totalsnow` | Возвращает значение количества выпавшего снега в выбранной единице измерения. (По умолчанию: сантиметры-см) |
| `historical`>`...`>`sunhour`  | Возвращает значение количества солнечных часов |
| `historical`>`...`>`uv_index`  | Возвращает значение УФ-индекса связанного с текущими погодными условиями |
| `historical`>`...`>`hourly` |  Возвращает серию вложенных объектов, содержащих почасовые данные о погоде. Перечисление и подробное объяснение ниже |
| `hourly`>`time` |  Возвращает время в виде числа формат 24 часа: {::nomarkdown}<ul><li>0= 12:00 AM</li><li>100 = 1:00 AM</li><li>200 = 2:00 AM</li><li>...</li><li>1200 = 12:00 PM</li><li>1300 = 1:00 PM</li><li>и т.д.</li></ul>{:/}  |
| `hourly`>`temperature` | Возвращает температуру в выбранных единицах измерения. (По умолчанию: градусы Цельсия) |
| `hourly`>`wind_speed` | Возвращает значение скорость ветра в выбранных единицах измерения (По умолчанию: километры/час) |
| `hourly`>`wind_degree` | Возвращает значение градуса ветра |
| `hourly`>`wind_dir` | Возвращает значение направление ветра |
| `hourly`>`weather_code` | Возвращает универсальный код погодных условий для местоположения, указанного при запросе. Вы можете скачать все доступные коды погоды по ссылке: [Скачать коды погоды (ZIP-файл)](https://weatherstack.com/site_resources/weatherstack-weather-condition-codes.zip) |
| `hourly`>`weather_icons` | Возвращает один или несколько значков погоды в формате PNG для местоположения, указанного при запросе |
| `hourly`>`weather_descriptions` | Возвращает одно или несколько описаний погоды для местоположения указанного при запросе |
| `hourly`>`precip` | Возвращает значение уровня осадков в выбранной единице измерения. (По умолчанию: мм-миллиметры) |
| `hourly`>`humidity` | Возвращает значение уровня влажности воздуха в процентах |
| `hourly`>`visibility` | Возвращает значение видимости в выбранных единицах измерения. (По умолчанию: километры) |
| `hourly`>`pressure` | Возвращает значение давления в выбранных единицах измерения.(По умолчанию: МБ-миллибар) |
| `hourly`>`cloudcover` | Возвращает значение облачности в процентах |
| `hourly`>`heatindex` | Возвращает значение температуры теплового индекса в выбранных единица измерения. (По умолчанию: градусы Цельсия) |
| `hourly`>`dewpoint` | Возвращает значение температуры точки росы в выбранных единицах измерения. (По умолчанию: градусы Цельсия) |
| `hourly`>`windchill` | Возвращает значение температуры охлаждения на ветру в выбранных единицах измерения. (По умолчанию: градусы Цельсия) |
| `hourly`>`windgust`  | Возвращает значение скорости ветра в выбранных единицах измерения. (По умолчанию: километры/час) |
| `hourly`>`feelslike` | Возвращает значение температуры "по ощущениям" в выбранных единицах измерения. (По умолчанию: градусы Цельсия) |
| `hourly`>`chanceofrain` | Возвращает значение вероятности дождя (осадков) в процентах |
| `hourly`>`chanceofremdry` | Возвращает значение вероятности сухой погоды в процентах |
| `hourly`>`chanceofwindy`  | Возвращает значение вероятность ветреной погоды в процентах |
| `hourly`>`chanceofovercast` | Возвращает значение вероятности пасмурной погоды в процентах |
| `hourly`>`chanceofsunshine` |  Возвращает значение вероятности солнечной погоды в процентах |
| `hourly`>`chanceoffrost` |   Возвращает значение вероятности заморозков в процентах |
| `hourly`>`chanceofhightemp` | Возвращает значение вероятности высоких температур в процентах |
| `hourly`>`chanceoffog` | Возвращает значение вероятности тумана в процентах |
| `hourly`>`chanceofsnow` | Возвращает значение вероятности снега в процентах  |
| `hourly`>`chanceofthunder` | Возвращает значение вероятности грома в процентах |
| `hourly`>`uv_index` | Возвращает значение УФ-индекса связанного с текущими погодными условиями |

###  Исторические данные о погоде за промежуток времени

В дополнение к поиску данных о погоде на определенные даты в прошлом, API способен обрабатывать результаты за  промежуток времени, если для параметров `historical_date_start` и `historical_date_end` установлены допустимые значения.

**Пример API запроса:**

```bash
https://api.weatherstack.com/historical ? access_key = YOUR_ACCESS_KEY & query = New York & historical_date_start = 2015-01-21 & historical_date_end = 2015-01-25
```

**Параметры HTTP GET запроса:**

|  Объект | Описание  |
|:--------|:----------|
| `acccess_key` | **[Обязательно]** Ваш ключ доступа к API, который можно найти в [панели управления учетной записи](https://weatherstack.com/dashboard) |
| `query`      | **[Обязательно]** Используйте этот параметр, чтобы передать API один идентификатор местоположения или несколько идентификаторов местоположения, разделенных точкой с запятой. Узнайте больше о [параметре запроса](https://weatherstack.com/documentation#query_parameter)  |
| `historical_date_start` | **[Обязательно]** Используйте этот параметр, чтобы передать начальную дату временного интервала |
| `historical_date_end` | **[Обязательно]** Используйте этот параметр, чтобы передать конечную дату временного интервала |
| `hourly`         | [Опционально] Установите для этого параметра значение  `1` (включено) или `0` (выключено) в зависимости от необходимости  получить данные о погоде с разбивкой по часам. (По умолчанию: `0`-выкл.) |
| `interval` | [Опционально] Если включены почасовые данные, используйте этот параметр для определения интервала: {::nomarkdown}<ul><li>1 час</li><li>3 часа (по умолчанию)</li><li>6 часов</li><li>12 часов (день/ночь)</li><li>24 часа (в среднем за день)</li></ul>{:/}   |
| `units`  | [Опционально] Используйте этот параметр для передачи одного из идентификаторов объекта в API: {::nomarkdown}<ul><li>m метрический</li><li>s научный</li><li>f Фарингейт</li></ul>{:/} Узнайте больше о [параметре единиц измерения](https://weatherstack.com/documentation#units_parameter)  |  
| `language`  |  [Опционально] Используйте этот параметр, чтобы указать предпочитаемый язык ответа API, используя его ISO-код (по умолчанию: английский). Узнайте больше о [языковом параметре](https://weatherstack.com/documentation#language_parameter)  |  
| `callback` | [Опционально] Используйте этот параметр, чтобы указать имя функции обратного вызова JSONP для переноса вашего ответа API. Узнайте больше об [обратных вызовах JSONP](https://weatherstack.com/documentation#jsonp_callbacks)   |

**Ответ API:**

Для получения дополнительной информации об ответе API обратитесь к разделу Исторические данные о погоде.

*Обратите внимание:* максимальный временной промежуток исторических данных о погоде составляет 60 дней.

*Примечание:* каждый день и местоположение в запросе учитывается в  ежемесячном разрешенном объеме запросов API.

### Прогноз погоды

Стек способен возвращать прогноз погоды на срок до 14 дней. Определите количество дней для прогноза используя параметр `forecast_days`.

**Пример API запроса:**

```bash
https://api.weatherstack.com/forecast ? access_key = YOUR_ACCESS_KEY & query = New York & forecast_days = 1 & hourly = 1
```

**Параметры HTTP GET запроса:**

|  Объект | Описание  |
|:--------|:----------|
| `acccess_key` | **[Обязательно]** Ваш ключ доступа к API, который можно найти в [панели управления учетной записи](https://weatherstack.com/dashboard) |
| `query`      | **[Обязательно]** Используйте этот параметр, чтобы передать API один идентификатор местоположения или несколько идентификаторов местоположения, разделенных точкой с запятой. Узнайте больше о [параметре запроса](https://weatherstack.com/documentation#query_parameter)  |
| `forecast_days` | [Опционально] Используйте этот параметр, чтобы указать количество дней, за которые  API вернет данные прогноза. (По умолчанию: 7 или 14 дней, в зависимости от подписки)  |
| `hourly`         | [Опционально] Установите для этого параметра значение  `1` (включено) или `0` (выключено) в зависимости от необходимости  получить данные о погоде с разбивкой по часам. (По умолчанию: `0`-выкл.) |
| `interval` | [Опционально] Если включены почасовые данные, используйте этот параметр для определения интервала: {::nomarkdown}<ul><li>1 час</li><li>3 часа (по умолчанию)</li><li>6 часов</li><li>12 часов (день/ночь)</li><li>24 часа (в среднем за день)</li></ul>{:/}   |
| `units`  | [Опционально] Используйте этот параметр для передачи одного из идентификаторов объекта в API: {::nomarkdown}<ul><li>m метрические</li><li>s научные</li><li>f Фаренгейт</li></ul>{:/} Узнайте больше о [параметре единиц измерения](https://weatherstack.com/documentation#units_parameter)  |  
| `language`  |  [Опционально] Используйте этот параметр, чтобы указать предпочитаемый язык ответа API, используя его ISO-код (по умолчанию: английский). Узнайте больше о [языковом параметре](https://weatherstack.com/documentation#language_parameter)  |  
| `callback` | [Опционально] Используйте этот параметр, чтобы указать имя функции обратного вызова JSONP для переноса вашего ответа API. Узнайте больше об [обратных вызовах JSONP](https://weatherstack.com/documentation#jsonp_callbacks)   |

*Примечание:* каждый день и местоположение в запросе учитывается в  ежемесячном разрешенном объеме запросов API.

**Ответ API:**

```json
{
    "request": {
        "type": "City",
        "query": "New York, United States of America",
        "language": "en",
        "unit": "m"
    },
    "location": {
        "name": "New York",
        "country": "United States of America",
        "region": "New York",
        "lat": "40.714",
        "lon": "-74.006",
        "timezone_id": "America/New_York",
        "localtime": "2019-09-07 11:38",
        "localtime_epoch": 1567856280,
        "utc_offset": "-4.0"
    },
    "current": {
        "observation_time": "03:38 PM",
        "temperature": 18,
        "weather_code": 113,
        "weather_icons": [
            "https://assets.weatherstack.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png"
        ],
        "weather_descriptions": [
            "Sunny"
        ],
        "wind_speed": 0,
        "wind_degree": 345,
        "wind_dir": "NNW",
        "pressure": 1011,
        "precip": 0,
        "humidity": 58,
        "cloudcover": 0,
        "feelslike": 18,
        "uv_index": 5,
        "visibility": 16
    },
    "forecast": {
        "2019-09-07": {
            "date": "2019-09-07",
            "date_epoch": 1567814400,
            "astro": {
                "sunrise": "06:28 AM",
                "sunset": "07:19 PM",
                "moonrise": "03:33 PM",
                "moonset": "12:17 AM",
                "moon_phase": "First Quarter",
                "moon_illumination": 54
            },
            "mintemp": 17,
            "maxtemp": 25,
            "avgtemp": 21,
            "totalsnow": 0,
            "sunhour": 10.3,
            "uv_index": 5,
            "hourly": [
                {
                    "time": "0",
                    "temperature": 18,
                    "wind_speed": 28,
                    "wind_degree": 15,
                    "wind_dir": "NNE",
                    "weather_code": 122,
                    "weather_icons": [
                        "https://assets.weatherstack.com/images/wsymbols01_png_64/wsymbol_0004_black_low_cloud.png"
                    ],
                    "weather_descriptions": [
                        "Overcast"
                    ],
                    "precip": 0,
                    "humidity": 68,
                    "visibility": 10,
                    "pressure": 1008,
                    "cloudcover": 75,
                    "heatindex": 18,
                    "dewpoint": 12,
                    "windchill": 18,
                    "windgust": 35,
                    "feelslike": 18,
                    "chanceofrain": 0,
                    "chanceofremdry": 87,
                    "chanceofwindy": 0,
                    "chanceofovercast": 90,
                    "chanceofsunshine": 15,
                    "chanceoffrost": 0,
                    "chanceofhightemp": 0,
                    "chanceoffog": 0,
                    "chanceofsnow": 0,
                    "chanceofthunder": 0,
                    "uv_index": 0
                },
                {   "time": "300", ...   },
                {   "time": "600", ...   },
                // 6 more items
            ]
        }
    }
}
```
*Обратите внимание:* объекты `request`,`location` и `current` не объясняются ниже, поскольку они уже упомянуты в разделе Конечная точка текущей погоды выше.

**Объекты ответа API:**

| Объект ответа    | Описание    |
|:-----------------|:------------|
| `forecast`>`...`>`date` | Возвращает дату прогноза |
| `forecast`>`...`>`date_epoch` | Возвращает дату прогноза в формате UNIX |
| `forecast`>`...`>`astro` | Возвращает 6 вложенных объектов, содержащих сведения об астрономической погоде, перечисление и подробное объяснение ниже  |
| `astro`>`sunrise` | Возвращает местное время восхода солнца в формате `hh:mm am/pm` |
| `astro`>`sunset` | Возвращает местное время захода солнца в формате `hh:mm am/pm` |
| `astro`>`moonrise` | Возвращает местное время восхода луны в формате `hh:mm am/pm` |
| `astro`>`moonset`  | Возвращает местное время захода луны в формате `hh:mm am/pm`  |
| `astro`>`moon_phase` | Возвращает фазу луны. Возможные значения: {::nomarkdown}<ul><li>Новолуние</li><li>Молодая луна</li><li>Первая четверть</li><li>Прибывающая луна</li><li>Полнолуние</li><li>Убывающая луна</li><li>Последняя четверть</li><li>Старая луна</li></ul>{:/}  |
| `astro`>`moon_illumination` | Возвращает значение уровня освещенности луны в процентах |
| `forecast`>`...`>`mintemp` | Возвращает значение минимальной температуры за день в выбранной единице измерения. (По умолчанию: Цельсий) |
| `forecast`>`...`>`maxtemp` | Возвращает значение максимальной температуры за день выбранной единице измерения. (По умолчанию: Цельсий) |
| `forecast`>`...`>`avgtemp` | Возвращает значение средней температуры за день в выбранной единице измерения. (По умолчанию: Цельсий) |
| `forecast`>`...`>`totalsnow` | Возвращает значение количества выпавшего снега в выбранной единице измерения. (По умолчанию: сантиметры-см) |
| `forecast`>`...`>`sunhour`  | Возвращает значение количества солнечных часов |
| `forecast`>`...`>`uv_index`  | Возвращает значение УФ-индекса связанного с текущими погодными условиями |
| `forecast`>`...`>`hourly` |  Возвращает серию вложенных объектов, содержащих почасовые данные о погоде. Перечисление и подробное объяснение ниже |
| `hourly`>`time` |  Возвращает время в виде числа формат 24 часа: {::nomarkdown}<ul><li>0= 12:00 AM</li><li>100 = 1:00 AM</li><li>200 = 2:00 AM</li><li>...</li><li>1200 = 12:00 PM</li><li>1300 = 1:00 PM</li><li>и т.д.</li></ul>{:/}  |
| `hourly`>`temperature` | Возвращает температуру в выбранных единицах измерения. (По умолчанию: градусы Цельсия) |
| `hourly`>`wind_speed` | Возвращает значение скорость ветра в выбранных единицах измерения (По умолчанию: километры/час) |
| `hourly`>`wind_degree` | Возвращает значение градуса ветра |
| `hourly`>`wind_dir` | Возвращает значение направление ветра |
| `hourly`>`weather_code` | Возвращает универсальный код погодных условий для местоположения, указанного при запросе. Вы можете скачать все доступные коды погоды по ссылке: [Скачать коды погоды (ZIP-файл)](https://weatherstack.com/site_resources/weatherstack-weather-condition-codes.zip) |
| `hourly`>`weather_icons` | Возвращает один или несколько значков погоды в формате PNG для местоположения, указанного при запросе |
| `hourly`>`weather_descriptions` | Возвращает одно или несколько описаний погоды для местоположения, указанного при запросе |
| `hourly`>`precip` | Возвращает значение уровня осадков в выбранной единице измерения. (По умолчанию: мм-миллиметры) |
| `hourly`>`humidity` | Возвращает значение уровня влажности воздуха в процентах |
| `hourly`>`visibility` | Возвращает значение видимости в выбранных единицах измерения. (По умолчанию: километры) |
| `hourly`>`pressure` | Возвращает значение давления в выбранных единицах измерения.(По умолчанию: МБ-миллибар) |
| `hourly`>`cloudcover` | Возвращает значение облачности в процентах |
| `hourly`>`heatindex` | Возвращает значение температуры теплового индекса в выбранных единица измерения. (По умолчанию: градусы Цельсия) |
| `hourly`>`dewpoint` | Возвращает значение температуры точки росы в выбранных единицах измерения. (По умолчанию: градусы Цельсия) |
| `hourly`>`windchill` | Возвращает значение температуры охлаждения на ветру в выбранных единицах измерения. (По умолчанию: градусы Цельсия) |
| `hourly`>`windgust`  | Возвращает значение скорости ветра в выбранных единицах измерения. (По умолчанию: километры/час) |
| `hourly`>`feelslike` | Возвращает значение температуры "по ощущениям" в выбранных единицах измерения. (По умолчанию: градусы Цельсия) |
| `hourly`>`chanceofrain` | Возвращает значение вероятности дождя (осадков) в процентах |
| `hourly`>`chanceofremdry` | Возвращает значение вероятности сухой погоды в процентах |
| `hourly`>`chanceofwindy`  | Возвращает значение вероятность ветреной погоды в процентах |
| `hourly`>`chanceofovercast` | Возвращает значение вероятности пасмурной погоды в процентах |
| `hourly`>`chanceofsunshine` |  Возвращает значение вероятности солнечной погоды в процентах |
| `hourly`>`chanceoffrost` |   Возвращает значение вероятности заморозков в процентах |
| `hourly`>`chanceofhightemp` | Возвращает значение вероятности высоких температур в процентах |
| `hourly`>`chanceoffog` | Возвращает значение вероятности тумана в процентах |
| `hourly`>`chanceofsnow` | Возвращает значение вероятности снега в процентах  |
| `hourly`>`chanceofthunder` | Возвращает значение вероятности грома в процентах |
| `hourly`>`uv_index` | Возвращает значение УФ-индекса связанного с текущими погодными условиями |

###  Поиск местоположения/Автозаполнение

Конечная точка `autocomplete`может использоваться для точного определения одного или нескольких местоположений и их идентификаторов, с целью их последующей передачи в конечную точку для получения данных о погоде. В примере ниже мы ищем London, United Kindom.

**Пример API запроса:**

```bash
https://api.weatherstack.com/autocomplete ? access_key = YOUR_ACCESS_KEY & query = london
```

**Параметры HTTP GET запроса:**

| Объект  | Описание    |
|:--------|:------------|
| `access_key` | **[Обязательно]** Ваш ключ доступа к API, который можно найти в [панели управления учетной записи](https://weatherstack.com/dashboard)|
| `query` | **[Обязательно]** Используйте этот параметр, чтобы передать запрос для поиска местоположения в API в виде текста |
| `callback` | [Опционально] Используйте этот параметр, чтобы указать имя функции обратного вызова JSONP для переноса вашего ответа API. Узнайте больше об [обратных вызовах JSONP](https://weatherstack.com/documentation#jsonp_callbacks)   |

**Ответ API:**

Успешный ответ вернет один или несколько результатов по вашему поисковому запросу. В примере первый объект массива (London, United Kingdom) содержит необходимый результат. Теперь, зная идентификаторы местоположения, мы можем использовать один из них для предстоящих запросов (в идеале широта и долгота). 
```json
{
    "request": {
        "query": "london",
        "results": 2
    },
    "results": [
        {
            "name": "London",
            "country": "United Kingdom",
            "region": "City of London, Greater London",
            "lon": "-0.106",
            "lat": "51.517",
            "timezone_id": "Europe/London",
            "utc_offset": "1.0"
        },
        {
            "name": "London",
            "country": "Canada",
            "region": "Ontario",
            "lon": "-81.250",
            "lat": "42.983",
            "timezone_id": "America/Toronto",
            "utc_offset": "-4.0"
        }
    ]
}
```

**Объекты ответа API:**

| Объект ответа   | Описание   |
|:----------------|:-----------|
| `request`>`query` | Возвращает запрос, отправленный в API |
| `request`>`results` | Возвращает количество найденных результатов в виде целого числа |
| `location`>`name` | Возвращает название города в соответствии с условиями поиска |
| `location`>`country` | Возвращает название страны, в которой расположен объект поиска |
| `location`>`region`  | Возвращает название региона, в котором расположен объект поиска |
| `location`>`lat`    | Возвращает координату широты, в которой расположен объект поиска  |
| `location`>`lon`    | Возвращает координату долготы, в которой расположен объект поиска |
| `location`>`timezone_id` | Возвращает идентификатор часового пояса, в котором расположен объект поиска. (Пример: America/New_York) |
| `location`>`utc_offset`  | Возвращает смещение UTC часового пояса, в котором расположен объект поиска. (Например:  `-4.0`) |

## Общие настройки
### Параметры запроса

Параметр `query`  может использоваться для передачи одного или нескольких местоположений в API. Используя для примера конечную точку `current` перечислим все доступные опции ниже:

**Одно местоположение:**

Наиболее распространенным вариантом использования параметра `query` является передача одного местоположения в API для запроса данных о погоде. Пример ниже:
```bash
https://api.weatherstack.com/current ? access_key = YOUR_ACCESS_KEY & query = London, United Kingdom
```

**Несколько местоположений:** (Профессиональный тариф и выше)

Для массового запроса вы можете передать в API несколько местоположений, разделенных точкой с запятой:
```bash
https://api.weatherstack.com/current ? access_key = YOUR_ACCESS_KEY & query = London;Singapur;Shanghai
```

Поддерживаемые идентификаторы местоположения:

Помимо простой передачи названия города, существует множество других способов передачи местоположения в API:

|   Название  | Пример   | Описание   |
|:------------|:---------|:-----------|
| Название местоположения | `query = New York` | Стандартный способ передачи имени местоположения в API |
| UK/Canada/US индекс | `query = 99501`  | Передайте значение почтового индекса Великобритании/Канады/США в API и автоматически определите местоположение |
| Географические координаты (широта/долгота) | `query = 40.7831, -73.9712` | Передайте значение широты и долготы в API и автоматически определите местоположение  |
| IP адрес  | `query = 153.65.8.20` | Передайте значение IP-адреса в API и автоматически определите местоположение |
| IP адрес (автоматическое определение) | `query = fetch:ip` | Передайте `fetch:ip` в API, чтобы автоматически определить IP-адрес и местоположение |

*Примечание:* Каждое местоположение, переданное как часть массового запроса, будет учитываться в  вашем ежемесячном разрешенном объеме запросов API.

### Параметры единиц измерения:

По умолчанию API возвращает все результаты в метрических единицах. Помимо метрических единиц, поддерживаются и другие распространенные форматы единиц измерения. Вы можете использовать параметр `units` для переключения между различными форматами единиц измерения метрическими, научными и по Фаренгейту.

**`m` Метрические:**

| Параметр   | Единица измерения     |
|:-----------|:----------------------|
| `units = m` | температура: Цельсий  |
| `units = m` | скорость ветра/видимость: километры/час |
| `units = m` | давление: мб - миллибар  |
| `units = m` | осадки: мм - миллиметры  |
| `units = m` | количество снега: см - сантиметры |

**`s` Научные:**

| Параметр   | Единица измерения     |
|:-----------|:----------------------|
| `units = s` | температура: Кельвин  |
| `units = s` | скорость ветра/видимость: километры/час |
| `units = s` | давление: мб - миллибар  |
| `units = s` | осадки: мм - миллиметры  |
| `units = s` | количество снега: см - сантиметры |

**`f`  Фаренгейт:**

| Параметр   | Единица измерения     |
|:-----------|:----------------------|
| `units = f` | температура: Фаренгейт  |
| `units = f` | скорость ветра/видимость: милли/час |
| `units = f` | давление: мб - миллибар  |
| `units = f` | осадки: мм - дюймы  |
| `units = f` | количество снега: см - дюймы |

### Параметр языка

API способен выдавать результаты на 40 языках. Чтобы изменить значение по умолчанию (английский) на другой язык, просто добавьте к вашему URL адресу параметр `language`  и установите для него 2-ух символьный ISO-код необходимого языка.

**Поддерживаемые языки:**

|  Параметр (код ISO)   | Язык  |
|:----------------------|:------|
| `language = ar`  | Арабский  |
| `language = bn`  | Бенгальский  |
| `language = bg`  | Болгарский  |
| `language = zh`  | Китайский упрощенный  |
| `language = zh_tw`  | Китайский традиционный  |
| `language = cs`  | Чешский  |
| `language = da`  | Датский  |
| `language = nl`  | Голландский  |
| `language = fi`  | Финский  |
| `language = fr`  | Французский  |
| `language = de`  | Немецкий  |
| `language = el`  | Греческий  |
| `language = hi`  | Хинди  |
| `language = hu`  | Венгерский  |
| `language = it`  | Итальянский  |
| `language = ja`  | Японский  |
| `language = jv`  | Яванский  |
| `language = ko`  | Корейский  |
| `language = zh_cmn`  | Севернокитайский  |
| `language = mr`  | Маратхи  |
| `language = pl`  | Польский  |
| `language = pt`  | Португальский  |
| `language = pa`  | Панджаби  |
| `language = ro`  | Румынский  |
| `language = ru`  | Русский  |
| `language = sr`  | Сербский  |
| `language = si`  | Сингальский  |
| `language = sk`  | Словацкий  |
| `language = es`  | Испанский  |
| `language = sv`  | Шведский  |
| `language = ta`  | Тамильский  |
| `language = te`  | Телугу  |
| `language = tr`  | Турецкий  |
| `language = uk`  | Украинский  |
| `language = ur`  | Урду  |
| `language = vi`  | Вьетнамский  |
| `language = zh_wuu`  | Ву (шанхайский)  |
| `language = zh_hsn`  | Сян  |
| `language = zh_yue`  | Юэ (кантонский диалект)  |
| `language = zu`  | Зулу  |

### Обратный вызов JSONP  

API поддерживает [обратные вызовы JSONP](https://www.w3schools.com/js/js_json_jsonp.asp). Чтобы воспользоваться этой функцией, просто добавьте параметр `callback` к вашему URL-запросу API и назначьте для него имя функции. API вернет результат, завернутый в теги указанной вам функции.

**Пример API запроса:**

```bash
https://api.weatherstack.com/current ? access_key = YOUR_ACCESS_KEY & query = New York & callback = FUNCTION_NAME
```

**Пример API ответа:**

```json
CALLBACK_FUNCTION ({
    {
    "request": {
        "type": "City",
        "query": "New York, United States of America",
        "language": "en",
        [...]
    } 
})
```

## Примеры кода

Ниже приведена серия примеров кода на различных языках программирования. Все они запрашивают и выводят данные о текущей погоде.

### Пример кода - PHP

```php
$location = 'New York';

$queryString = http_build_query([
  'access_key' => 'YOUR_ACCESS_KEY',
  'query' => $location,
]);

$ch = curl_init(sprintf('%s?%s', 'https://api.weatherstack.com/current', $queryString));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$json = curl_exec($ch);
curl_close($ch);

$api_result = json_decode($json, true);

echo "Current temperature in $location is {$api_result['current']['temperature']}℃", PHP_EOL;
```

### Пример кода - Python

```python
# coding: utf-8
import requests

params = {
  'access_key': 'YOUR_ACCESS_KEY',
  'query': 'New York'
}

api_result = requests.get('https://api.weatherstack.com/current', params)

api_response = api_result.json()

print(u'Current temperature in %s is %d℃' % (api_response['location']['name'], api_response['current']['temperature']))
```

### Пример кода - Node.js

```js
const axios = require('axios');
const params = {
  access_key: 'YOUR_ACCESS_KEY',
  query: 'New York'
}

axios.get('https://api.weatherstack.com/current', {params})
  .then(response => {
    const apiResponse = response.data;
    console.log(`Current temperature in ${apiResponse.location.name} is ${apiResponse.current.temperature}℃`);
  }).catch(error => {
    console.log(error);
  });
```

### Пример кода - jQuery

```js
$.ajax({
  url: 'https://api.weatherstack.com/current',
  data: {
    access_key: 'YOUR_ACCESS_KEY',
    query: 'New York'
  },
  dataType: 'json',
  success: function(apiResponse) {
    console.log(`Current temperature in ${apiResponse.location.name} is ${apiResponse.current.temperature}℃`);
  }
});
```

### Пример кода - Go

```go
package main

import (
  "encoding/json"
  "fmt"
  "net/http"
)

type Location struct {
  Name string `json:"name"`
}

type Weather struct {
  Temperature int `json:"temperature"`
}

type Response struct {
  Location Location `json:"location"`
  Current Weather `json:"current"`
}

func main() {
  httpClient := http.Client{}

  req, err := http.NewRequest("GET", "https://api.weatherstack.com/current", nil)
  if err != nil {
    panic(err)
  }

  q := req.URL.Query()
  q.Add("access_key", "YOUR_ACCESS_KEY")
  q.Add("query", "New York")
  req.URL.RawQuery = q.Encode()

  res, err := httpClient.Do(req)
  if err != nil {
    panic(err)
  }
  defer res.Body.Close()

  var apiResponse Response
  json.NewDecoder(res.Body).Decode(&apiResponse)

  fmt.Println(fmt.Sprintf("Current temperature in %s is %d℃", apiResponse.Location.Name, apiResponse.Current.Temperature))
}
```

### Пример кода - Ruby

```ruby
require 'net/http'
require 'json'

params = {
  :access_key => "YOUR_ACCESS_KEY",
  :query => "New York"
}
uri = URI('https://api.weatherstack.com/current')
uri.query = URI.encode_www_form(params)
json = Net::HTTP.get(uri)
api_response = JSON.parse(json)

puts "Current temperature in #{api_response['location']['name']} is #{api_response['current']['temperature']}"
```
